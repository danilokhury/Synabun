# This compose file handles the initial/default Qdrant instance only.
# Additional instances are created via `docker run` (see /api/connections/docker-new).
# Port and API key are injected at runtime from the active connection config.
services:
  qdrant-memory:
    image: qdrant/qdrant:latest
    container_name: synabun-qdrant
    restart: unless-stopped
    ports:
      - "${QDRANT_PORT:-6333}:6333"
      - "${QDRANT_GRPC_PORT:-6334}:6334"
    volumes:
      - qdrant-storage:/qdrant/storage
    environment:
      - QDRANT__SERVICE__API_KEY=${QDRANT_MEMORY_API_KEY:-claude-memory-local-key}
      - QDRANT__LOG_LEVEL=WARN

volumes:
  qdrant-storage:
    name: synabun-qdrant-data
